---
layout: post
status: publish
published: true
title: 访问量神马的最喜欢了
author: Oneplus
author_login: oneplus
author_email: oneplus.lau@gmail.com
author_url: http://blog.oneplus.info
excerpt: ! "<div>当当当~过节给大家发福利啦。</div>\r\n<div>这货就是，神马人工智能啊、a*搜索啊、八数码啊、实验啊、Python啊，你懂的。都是哗哗的啦。</div>\r\n<div>不过伦家写300来行的java风的C++版Python，也挺不容易的啦。乃们表拿了东西也不吭一声就走了，怎么也留个爪神马的。</div>\r\n<div>输入那么浮云的东西，用一个叫eight.in的文件存一下，空格就画个x就好了。</div>\r\n"
wordpress_id: 183
wordpress_url: http://blog.oneplus.info/?p=183
date: 2011-04-02 22:19:44.000000000 +08:00
categories:
- 可以控制
- 挨踢民工
tags:
- python
- 人工智能
- 实验
- 哗哗的
comments:
- id: 77
  author: Lambyy
  author_email: lambyy.hit@gmail.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNC0wMiAyMjo1NTozMyArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wMiAxNDo1NTozMyArMDgwMA==
  content: Orz
- id: 78
  author: icycandy
  author_email: tgh728@gmail.com
  author_url: http://www.icycandy.com
  date: !binary |-
    MjAxMS0wNC0wMiAyMzowODoyNyArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wMiAxNTowODoyNyArMDgwMA==
  content: 表示没有看懂
- id: 79
  author: Oneplus
  author_email: oneplus.lau@gmail.com
  author_url: http://blog.oneplus.info
  date: !binary |-
    MjAxMS0wNC0wMiAyMzoxMzowNSArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wMiAxNToxMzowNSArMDgwMA==
  content: ! "一个用python做a*搜索，poj 1077\r\n…python很烂，结果hash和优先级队列都手写了。\r\n：）虽然没有什么实际意义，但是，却会有很多人喜欢的。因为，要应付人工智能实验这个的很邪恶的东西。"
- id: 81
  author: xiaodao
  author_email: lychees67@gmail.com
  author_url: http://www.shuizilong.com/house
  date: !binary |-
    MjAxMS0wNC0wMyAxMjoxMjowNyArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wMyAwNDoxMjowNyArMDgwMA==
  content: ! "瞳孔美。。。\r\nOrz。。。"
- id: 82
  author: Oneplus
  author_email: oneplus.lau@gmail.com
  author_url: http://blog.oneplus.info
  date: !binary |-
    MjAxMS0wNC0wMyAxMzoxNDo0NCArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wMyAwNToxNDo0NCArMDgwMA==
  content: 岛主昨天的表现真神勇啊~
- id: 83
  author: kinslover
  author_email: kinslover@gmail.com
  author_url: http://kinslover.info
  date: !binary |-
    MjAxMS0wNC0wMyAxMzo1NDo1MSArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wMyAwNTo1NDo1MSArMDgwMA==
  content: 纯膜拜。。。
- id: 84
  author: chuck
  author_email: imdly2009@gmail.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNC0wNCAxNToxMTozMiArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wNCAwNzoxMTozMiArMDgwMA==
  content: 膜拜学姐。。。
- id: 91
  author: GTmac
  author_email: gtmacchc@gmail.com
  author_url: http://gtmac.info
  date: !binary |-
    MjAxMS0wNC0wOCAxNjo0NjozMSArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wOCAwODo0NjozMSArMDgwMA==
  content: 谢博主，默默收下&amp;跑走了...
- id: 97
  author: discover
  author_email: discoverfly@gmail.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNC0wOSAxMToyMTowOCArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0wOSAwMzoyMTowOCArMDgwMA==
  content: 什么时候是学姐了？
- id: 99
  author: darkgt
  author_email: darkgt@163.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNC0xMSAxMjowMzoyOCArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0xMSAwNDowMzoyOCArMDgwMA==
  content: 话说POJ支持交python么？
- id: 101
  author: Oneplus
  author_email: oneplus.lau@gmail.com
  author_url: http://blog.oneplus.info
  date: !binary |-
    MjAxMS0wNC0xMSAxMjowNzoyMSArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0xMSAwNDowNzoyMSArMDgwMA==
  content: ! "poj不支持，zoj支持。\r\n作业那货，能跑出个结果就成了。"
- id: 103
  author: 阿姨洗铁路
  author_email: gg605007@163.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNC0xMiAxMjo0NDowNiArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0xMiAwNDo0NDowNiArMDgwMA==
  content: 注释还是太少了，就是这样。orz
- id: 105
  author: WyvernBai
  author_email: admin@asiteof.me
  author_url: http://asiteof.me
  date: !binary |-
    MjAxMS0wNC0xMiAxOToyMTowNyArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0xMiAxMToyMTowNyArMDgwMA==
  content: 顺手牵羊神马的最喜欢了，复制粘贴神马的最喜欢了，不用考试的限选课神马的最喜欢了
- id: 106
  author: Bei
  author_email: cbcherryblossom@126.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNC0xMiAyMzoxMToxNSArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0xMiAxNToxMToxNSArMDgwMA==
  content: ORZ！！！
- id: 107
  author: zyhc0468
  author_email: yehong_19@126.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNC0xMiAyMzoyMjo1NiArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNC0xMiAxNToyMjo1NiArMDgwMA==
  content: 好人啊~~绝对为民造福！！
- id: 129
  author: unknown author
  author_email: 123456789@163.com
  author_url: ''
  date: !binary |-
    MjAxMS0wNS0xMyAyMjo0Mjo0MCArMDgwMA==
  date_gmt: !binary |-
    MjAxMS0wNS0xMyAxNDo0Mjo0MCArMDgwMA==
  content: 拿走了……杀必死啊……
- id: 750
  author: discover
  author_email: discoverfly@gmail.com
  author_url: ''
  date: !binary |-
    MjAxMi0wNC0yNSAxMzoxMzo0NyArMDgwMA==
  date_gmt: !binary |-
    MjAxMi0wNC0yNSAwNToxMzo0NyArMDgwMA==
  content: 我是专门来找这个东西的~~ :-)
---
<div>当当当~过节给大家发福利啦。</div>
<div>这货就是，神马人工智能啊、a*搜索啊、八数码啊、实验啊、Python啊，你懂的。都是哗哗的啦。</div>
<div>不过伦家写300来行的java风的C++版Python，也挺不容易的啦。乃们表拿了东西也不吭一声就走了，怎么也留个爪神马的。</div>
<div>输入那么浮云的东西，用一个叫eight.in的文件存一下，空格就画个x就好了。</div>
<a id="more"></a><a id="more-183"></a>

~~~python
# coding=utf-8
import re
import os
import math

SIZE = 362881
f    = range(0, SIZE, 1)
g    = range(0, SIZE, 1)
path = range(0, SIZE, 1)
step = range(0, SIZE, 1)

sourceNumState = -1
targetNumState = -1
hashedSourceNumState = -1
hashedTargetNumState = -1

distance = [
	[0 for a in range(10)] for b in range(10)
]
adjancy = [
	[1, 3],
	[0, 2, 4], 
	[1, 5], 
	[0, 4, 6], 
	[1, 3, 5, 7], 
	[2, 4, 8], 
	[3, 7], 
	[4, 6, 8], 
	[5, 7]
]
moves = [
	['r', 'd'], 
	['l', 'r', 'd'],
	['l', 'd'], 
	['u', 'r', 'd'],
	['u', 'l', 'r', 'd'], 
	['u', 'l', 'd'],
	['u', 'r'], 
	['u', 'l', 'r'], 
	['u', 'l']
]
location = [
	[0, 0], [0, 1], [0, 2],
	[1, 0], [1, 1], [1, 2],
	[2, 0], [2, 1], [2, 2]
]

class node():
	key   = -1
	value = 10000000000
	
	def __init__(self, key, value):
		self.key   = key
		self.value = value
		
	def lessThan(self, node_t):
		if self.value &lt; node_t.value or (self.value == node_t.value and self.key &gt; node_t.key):
			return True
		else:
			return False
			
	def getKey(self):
		return self.key
		
	def getValue(self):
		return self.value

class hash():
	hashTable = range(0, SIZE, 1)
	
	def __init__(self):
		for i in range(0, SIZE, 1):
			self.hashTable[i] = -1

	def findHashPosition(self, value):
		hashID = value % SIZE
		while self.hashTable[hashID] != -1 and self.hashTable[hashID] != value:
			# print 'in while', self.hashTable[hashID]
			hashID = hashID + 1
			if hashID == SIZE:
				hashID = 0
		return hashID
			
	def findHashValue(self, position):
		if position &gt;= SIZE or position &lt; 0:
			return -1
		else:
			return self.hashTable[position]
			
	def insertHash(self, value):
		position = self.findHashPosition(value)
		# print 'insertHash:: hash position :', position
		self.hashTable[position] = value
		return position
		
class priority_queue():
	last = 0
	queue = []
	# queue save hash id

	def __init__(self):
		self.last = 0
		self.queue = [ node(10000000000, 10000000000) ] * SIZE
		# print type( self.queue[100000] )
	
	def empty(self):
		if self.last == 0:
			return True
		else:
			return False

	def top(self):
		return self.queue[1]

	def pop(self):
		self.queue[ 1 ] = self.queue[ self.last ]
		self.last = self.last - 1
		self.siftDown( 1 )
	
	def push( self, value ):
		self.last = self.last + 1
		self.queue[ self.last ] = value
		self.queue[ 0 ] = value
		self.siftUp( self.last )
	
	def getF( self, p ):
		# print self.queue[ p ]
		return f[ hashTable.findHashPosition(self.queue[ p ]) ]
	
	def siftUp( self, p ):
		i = p / 2
		j = p
		tmp = self.queue[ p ]
		# print type( tmp )
		
		while tmp.lessThan(self.queue[ i ]):
			# print i
			self.queue[ j ] = self.queue[ i ]
			j = i
			i = j / 2
		self.queue[ j ] = tmp

	def siftDown( self, p ):
		i = p * 2
		j = p
		tmp = self.queue[ p ]
		
		while i &lt;= self.last:
			if i &lt; self.last and self.queue[ i + 1 ].lessThan(self.queue[ i ]):
				i = i + 1
			if self.queue[ i ].lessThan( tmp ) == False:
				break
			else:
				self.queue[ j ] = self.queue[ i ]
				j = i
				i = j * 2
		self.queue[ j ] = tmp

openTable = priority_queue()
hashTable = hash()
closeTable = range(0, SIZE, 1)
		
def convertToNum( arrayState ):
	ret = 0
	for i in range(0, 9, 1):
		ret = ret * 10
		ret = ret + int(arrayState[i])
	return ret
	
def convertToArray( numState ):
	ret = range(0, 9, 1)
	for i in range(8, -1, -1):
		ret[i]   = numState % 10
		numState = numState / 10
	return ret
	
def isSolvable(sourceState, targetState):
	odd = 0
	eve = 0
	for i in range(0, 9, 1):
		for j in range(0, 9, 1):
			if sourceState[i] &gt; sourceState[j] and sourceState[i] &gt; 0 and sourceState[j] &gt; 0:
				odd = odd + 1
			if targetState[i] &gt; targetState[j] and targetState[i] &gt; 0 and targetState[j] &gt; 0:
				eve = eve + 1
	if odd % 2 == eve % 2:
		return True
	else:
		return False

def getSourceState():
	fp  = open('eight.in', 'r')
	sourceState = re.split('\n| ', fp.read())
	fp.close()
	
	for i in range(0, 9, 1):
		if sourceState[i] == 'x':
			sourceState[i] = '0'
	return sourceState
	
def getTargetState():
	targetState = []
	for i in range(0, 8, 1):
		targetState.append( str(i + 1) )
	targetState.append('0')
	
	return targetState

def getEmptyPositionInArray( arrayState ):
	for i in range(0, 9, 1):
		if arrayState[i] == 0:
			return i
			
def getEstimateValue( numState ):
	ret = 0
	for i in range(0, 9, 1):
		# print i, numState[i]
		ret = ret + distance[(i + 1) % 9][ int(numState[i]) ]
	return ret

def solve(srcArrayState, tagArrayState):
	for i in range(0, SIZE, 1):
		closeTable[i] = 0
	
	for i in range(0, 9, 1):
		for j in range(0, 9, 1):
			distance[(i + 1) % 9][(j + 1) % 9] = abs(location[i][0] - location[j][0]) + abs(location[i][1] - location[j][1])
			
	sourceNumState = convertToNum(srcArrayState)
	targetNumState = convertToNum(tagArrayState)
	hashedSourceNumState = hashTable.insertHash(sourceNumState)
	hashedTargetNumState = hashTable.insertHash(targetNumState)
	
	# print 'sourceNumState :', sourceNumState, hashedSourceNumState
	g[ hashedSourceNumState ] = 0;
	f[ hashedSourceNumState ] = getEstimateValue(srcArrayState)
	f[ hashedTargetNumState ] = -1;
	openTable.push( node(sourceNumState, f[ hashedSourceNumState ]) )
	
	while True:
		currentNumState = openTable.top().key
		currentArrayState = convertToArray( currentNumState )
		hashedCurrentNumState = hashTable.insertHash( currentNumState )
		openTable.pop()
		# print 'currentNumState :', currentNumState, hashedCurrentNumState
		# raw_input(&quot;Press ENTER to exit&quot;)
		
		if currentNumState == targetNumState:
			stack = []
			traceNumState = currentNumState
			hashedTraceNumState = hashTable.insertHash(traceNumState)
			while hashedTraceNumState != hashedSourceNumState:
				stack.append( step[ hashedTraceNumState ] )
				hashedTraceNumState = path[ hashedTraceNumState ]

			for move in reversed( stack ):
				print move
			break
		
		closeTable[ hashedCurrentNumState ] = 2
		emptyPosition = getEmptyPositionInArray( currentArrayState )
		
		for nextPosition in adjancy[ emptyPosition ]:
			nextArrayState = []
			for ii in currentArrayState:
				nextArrayState.append(str(ii))
			
			nextArrayState[ emptyPosition ] = currentArrayState[ nextPosition ]
			nextArrayState[ nextPosition ]  = '0'
			
			# print 'nextArrayState :', nextArrayState
			nextNumState = convertToNum( nextArrayState )
			
			hashedNextNumState = hashTable.insertHash( nextNumState );
			
			if closeTable[ hashedNextNumState ] == 0:
				closeTable[ hashedNextNumState ] = 1;
				g[ hashedNextNumState ] = g[ hashedCurrentNumState ] + 1
				f[ hashedNextNumState ] = g[ hashedNextNumState ] + getEstimateValue( currentArrayState )
				path[ hashedNextNumState ] = hashedCurrentNumState
				step[ hashedNextNumState ] = moves[ emptyPosition ][ adjancy[ emptyPosition ].index( nextPosition ) ]
				openTable.push( node(nextNumState, f[hashedNextNumState]) )
			elif closeTable[ hashedNextNumState ] == 1 and g[ hashedCurrentNumState ] + 1 &lt; g[ hashedNextNumState ]:
				g[ hashedNextNumState ] = g[ hashedCurrentNumState ] + 1
				f[ hashedNextNumState ] = g[ hashedNextNumState ] + getEstimateValue( currentArrayState )
				path[ hashedNextNumState ] = hashedCurrentNumState
				step[ hashedNextNumState ] = moves[ emptyPosition ][ adjancy[ emptyPosition ].index( nextPosition ) ]
				openTable.pop()
	
def main():
	sourceArrayState = getSourceState()
	targetArrayState = getTargetState()
	sourceNumState = convertToNum(sourceArrayState)
	targetNumState = convertToNum(targetArrayState)
	print sourceNumState, targetNumState
	
	if isSolvable(sourceArrayState, targetArrayState) == False:
		print 'What the Hell!'
	else:
		solve(sourceArrayState, targetArrayState)
		
if __name__ == '__main__':
	main()
~~~

<a href="http://blog.oneplus.info/wp-content/uploads/2011/04/haha.jpg"><img src="http://blog.oneplus.info/wp-content/uploads/2011/04/haha.jpg" alt="" title="haha" width="530" height="318" class="aligncenter size-full wp-image-184" /></a>
